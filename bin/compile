#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

# fail fast
set -e

# parse args
BUILD_DIR=$1
CACHE_DIR=$2

echo -n "-----> Downloading Git..."
curl --silent --location https://nodeload.github.com/git/git/tarball/master | tar xz
cd git-1.7.11.5
echo "       done."


echo "-----> Installing Git..."
mkdir $PWD/bin
make NO_TCLTK=YesPlease NO_PERL=YesPlease NO_GETTEXT=YesPlease NO_SVN_TESTS=YesPlease NO_MSGFMT=YesPlease NO_MSGFMT_EXTENDED_OPTIONS=YesPlease prefix=$PWD/bin install
#make NO_CURL=1 NO_MSGFMT=YesPlease NO_TCLTK=YesPlease NO_GETTEXT=YesPlease prefix=$BUILD_DIR/local/bin install
echo "       done."

PATH=$PWD/bin:$PATH